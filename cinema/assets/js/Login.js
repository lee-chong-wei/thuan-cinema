// This file is autogenerated via the `commonjs` Grunt task. You can require() this file in a CommonJS environment.


function showPolicy() // open modal Policy
{
  $(document).ready(function(){
    $("#Policy").click(function(){
      $("#showPolicy").show();
    });
  });
}

function closePolicy() // close modal Policy
{
  $(document).ready(function(){
    $(".btn-close").click(function(){
      $("#showPolicy").hide();
    });
  });
}

// Register information to server 
  $(document).ready(function(){
    $("#Register").on('submit', function(event){       
      event.preventDefault(); // prevent form submit   
        $.ajax({
          url: "/Galaxy_cinema/home/Register",
          type: "post",
          data: $("#Register").serialize(), // serialize data from form submit
          success: function(data){
            console.log(data);
            if (Array.isArray(data)) {
              var data = JSON.parse(data);
            // echo form error phone
              var phone = data.phone;
              $("#phone").text(phone);
            // echo form error username
              var username = data.username;
              $("#username-danger").text(username);
            // echo form error email
              var email = data.email;
              $("#email").text(email);
            // echo form error password
              var password = data.password;
              $("#password").text(password);
            // echo form error confirm password
              var cfpassword = data.confirm_password;
              $("#confirm_password").text(cfpassword);
            // echo form error birthdate
              var birthdate = data.birthdate;
              $("#birthdate").text(birthdate); 
              alert('Please fill all red point');
            }
            else {
              alert('sign up success, please log in to continue!');              
            }                   
          },
          error: function(data){    
            console.log(data); 
            alert("failure");
          }
        })
      })
  })  

// Login Function
  $(document).ready(function(){
    $("#LogIn").on('submit', function(event){
      event.preventDefault();
      $.ajax({
        url: "/Galaxy_cinema/home/SignIn",
        type: "post",
        data: $("#LogIn").serialize(),
        success: function(data){
           if (Array.isArray(data)) {
            console.log(data);
            var data = JSON.parse(data);
            var SIemail = data.email;
            $("#SignIn-email").text(SIemail);
            var SIpassword = data.password;
            $("#SignIn-password").text(SIpassword);
           } else {
            console.log(data);
            $("#flashdata").text(data);
           }
        },
        error: function(){
          console.log(data);
          alert('failure to sigin in, please signin again')
        }
      })
    })
  })
   
  